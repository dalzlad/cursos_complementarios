<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üß© M√≥dulo 2+3 ‚Äî MongoDB: De lo Relacional a Tipos de Datos</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{
  --brand-1:#0ea5a4;
  --brand-2:#0369a1;
  --muted:#374151;
  --bg-warm:#f5f9fb;
  --code-bg:#0b1220;
}
html { font-size: 18px; scroll-behavior: smooth; }
body{
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  line-height:1.6;
  background: var(--bg-warm);
  color:#0f172a;
}
.card{background:white;border-radius:14px;box-shadow:0 10px 30px rgba(2,6,23,0.06);padding:1.5rem;margin-bottom:1.5rem;}
pre.code{background: var(--code-bg); color:#e6f3f1; padding:1rem; border-radius:10px; overflow:auto; font-family:ui-monospace, monospace; font-size:1rem; line-height:1.6;}
code.inline{background: rgba(3,105,161,0.06); padding:0.12rem 0.45rem; border-radius:6px; font-family:ui-monospace, monospace;}
.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .9rem;border-radius:10px;font-weight:600;cursor:pointer;transition:transform .12s ease, box-shadow .12s ease;}
.btn:active{transform: translateY(1px);}
.btn-primary{background:linear-gradient(90deg,var(--brand-1),var(--brand-2));color:white;box-shadow:0 8px 20px rgba(3,105,161,0.12);}
.btn-ghost{background:white;border:1px solid rgba(3,105,161,0.08);color:var(--brand-2);}
details summary{list-style:none;cursor:pointer;padding:.75rem 1rem;border-radius:10px;background:linear-gradient(180deg, rgba(6,95,70,0.04), transparent);font-weight:600;}
details[open] summary{background:linear-gradient(180deg, rgba(3,105,161,0.06), transparent);}
details>.content{padding:0.75rem 1rem 1rem 1rem;}
.small{font-size:.95rem;color:var(--muted);}
.diagram-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:1rem;
}
.diagram-card{
  background:linear-gradient(180deg,#f0fdfa,#ecfeff);
  border:1px solid #bae6fd;
  border-radius:12px;
  padding:1rem;
  text-align:center;
  font-weight:500;
}
@media (max-width:768px){ html { font-size:17px; } }
</style>
</head>

<body>

<!-- NAV -->
<header class="sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-gray-100">
<nav class="max-w-6xl mx-auto px-6 py-3 flex items-center justify-between">
  <a href="../index.html" class="flex items-center gap-2">
    <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background:linear-gradient(180deg,var(--brand-1),var(--brand-2));">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 2C12 2 7 6 7 11C7 15 11 20 12 22C13 20 17 15 17 11C17 6 12 2 12 2Z" fill="white"/></svg>
    </div>
    <span class="font-semibold text-lg text-slate-800">Curso MongoDB</span>
  </a>
  <div class="flex items-center gap-3 text-sm font-medium">
    <a href="../modulos/modulo0.html" class="px-3 py-2 rounded hover:bg-slate-50">M√≥dulo 0</a>
    <a href="../modulos/modulo1.html" class="px-3 py-2 rounded hover:bg-slate-50">M√≥dulo 1</a>
    <a href="#" class="px-3 py-2 rounded bg-slate-100 text-slate-900 font-semibold">M√≥dulo 2</a>
    <a href="../modulos/modulo3.html" class="px-3 py-2 rounded hover:bg-slate-50">M√≥dulo 3</a>
    <a href="../modulos/modulo4.html" class="px-3 py-2 rounded hover:bg-slate-50">M√≥dulo 4</a>
    <a href="../modulos/modulo5.html" class="px-3 py-2 rounded hover:bg-slate-50">M√≥dulo 5</a>
  </div>
</nav>
</header>

<main class="max-w-6xl mx-auto px-6 py-10">

<!-- Hero -->
<section class="mb-8 text-center">
  <h1 class="text-3xl md:text-4xl font-extrabold text-slate-900">üß© M√≥dulo 2 ‚Äî Modelado documental y tipos de datos</h1>
  <p class="text-lg text-gray-600 mt-2">Duraci√≥n: <strong>2 horas</strong> ‚Ä¢ Nivel: <strong>B√°sico</strong></p>
  <div class="mt-4 flex items-center justify-center gap-3">
    <button class="btn btn-ghost" onclick="location.href='../index.html'">Volver al √≠ndice</button>
  </div>
</section>

<!-- Objetivos -->
<section class="card">
<h3 class="text-2xl font-semibold text-slate-900 mb-3">üéØ Objetivos del m√≥dulo</h3>
<ul class="list-disc pl-6 space-y-2 text-lg text-gray-700">
<li>Comprender c√≥mo tablas, filas y relaciones se traducen a documentos y colecciones.</li>
<li>Identificar equivalencias entre SQL y MongoDB.</li>
<li>Aprender a transformar un esquema relacional a dise√±o embebido o referencial.</li>
<li>Identificar los principales tipos de datos de MongoDB y su representaci√≥n BSON.</li>
<li>Diferenciar c√≥mo se almacenan internamente los documentos y usar tipos adecuados.</li>
<li>Aplicar los tipos de datos en ejemplos reales (fechas, n√∫meros, arrays, objetos, booleanos, nulos, etc.).</li>
</ul>
</section>

<!-- 1 -->
<section class="card">
<h3>üìñ 1. Recordemos: modelo relacional (SQL)</h3>
<p class="text-gray-700 mb-3">Las bases relacionales usan tablas con columnas fijas, filas y relaciones mediante claves primarias y for√°neas.</p>
<div class="overflow-x-auto mb-4">
<table class="w-full text-left border-collapse">
<thead>
<tr class="text-sm text-gray-600"><th class="p-2 border-b">Tabla</th><th class="p-2 border-b">Columnas principales</th></tr>
</thead>
<tbody>
<tr><td class="p-2 border-b">clientes</td><td class="p-2 border-b">id_cliente, nombre, correo</td></tr>
<tr><td class="p-2 border-b">pedidos</td><td class="p-2 border-b">id_pedido, fecha, total, id_cliente</td></tr>
</tbody>
</table>
</div>
<p class="text-gray-700">Relaciones t√≠picas:</p>
<ul class="list-disc pl-5 text-gray-700">
<li>1 a 1: cliente ‚Üí perfil</li>
<li>1 a muchos: cliente ‚Üí pedidos</li>
<li>Muchos a muchos: pedidos ‚Üî productos</li>
</ul>
</section>

<!-- Diagrama -->
<section class="card">
<h3>üìä Diagrama visual: equivalencias SQL ‚Üî MongoDB</h3>
<div class="diagram-grid mt-4">
  <div class="diagram-card">Tabla ‚Üí Colecci√≥n</div>
  <div class="diagram-card">Fila ‚Üí Documento</div>
  <div class="diagram-card">Columna ‚Üí Campo</div>
  <div class="diagram-card">PRIMARY KEY ‚Üí _id</div>
  <div class="diagram-card">FOREIGN KEY ‚Üí Referencia / $lookup</div>
</div>
</section>

<!-- 2 -->
<section class="card">
<h3>üìó 2. Equivalencias SQL ‚Üî MongoDB</h3>
<div class="overflow-x-auto">
<table class="w-full text-left border-collapse">
<thead>
<tr class="text-sm text-gray-600"><th class="p-2 border-b">Concepto SQL</th><th class="p-2 border-b">MongoDB</th></tr>
</thead>
<tbody>
<tr><td class="p-2 border-b">Base de datos</td><td class="p-2 border-b">Base de datos</td></tr>
<tr><td class="p-2 border-b">Tabla</td><td class="p-2 border-b">Colecci√≥n</td></tr>
<tr><td class="p-2 border-b">Fila</td><td class="p-2 border-b">Documento</td></tr>
<tr><td class="p-2 border-b">Columna</td><td class="p-2 border-b">Campo</td></tr>
<tr><td class="p-2 border-b">PRIMARY KEY</td><td class="p-2 border-b">_id</td></tr>
<tr><td class="p-2 border-b">FOREIGN KEY</td><td class="p-2 border-b">Referencia manual o $lookup</td></tr>
<tr><td class="p-2 border-b">JOIN</td><td class="p-2 border-b">$lookup</td></tr>
<tr><td class="p-2 border-b">Esquema fijo</td><td class="p-2 border-b">Esquema flexible</td></tr>
</tbody>
</table>
</div>
</section>

<!-- 3 -->
<section class="p-6 bg-gray-50 border border-gray-200 rounded-2xl">
  <h3 class="text-2xl font-bold mb-4 text-blue-700">üìò 3. Relaciones y dise√±o embebido/referencial</h3>

  <p class="text-gray-700 mb-4">
    En <strong>MongoDB</strong>, las relaciones entre datos se pueden representar de dos formas principales:
    <strong>embebidas</strong> (todo en un solo documento) o <strong>referenciales</strong> (datos separados que se enlazan).
  </p>

  <div class="grid md:grid-cols-2 gap-6">
    <!-- Dise√±o Embebido -->
    <div class="bg-white border border-green-200 rounded-2xl p-5 shadow-sm">
      <h4 class="text-xl font-semibold text-green-700 mb-2">üß© Dise√±o embebido</h4>
      <p class="text-gray-600 mb-3">
        Todos los datos relacionados viven <strong>dentro del mismo documento</strong>. 
        Es ideal para <strong>consultas r√°pidas</strong> y lecturas frecuentes.
      </p>
      <ul class="list-disc list-inside text-sm text-gray-600 mb-3">
        <li>Rendimiento alto en lecturas simples.</li>
        <li>Los datos siempre est√°n juntos.</li>
        <li>Perfecto si los datos no se consultan por separado.</li>
      </ul>

      <pre class="bg-gray-900 text-green-200 text-sm p-3 rounded-lg overflow-auto">
{
  "_id": 1,
  "nombre": "Carlos",
  "pedido": {
    "fecha": "2025-11-08",
    "total": 120000
  }
}
      </pre>

      <p class="text-sm text-gray-500 mt-2 italic text-center">
        üì¶ Ejemplo: el pedido est√° dentro del documento del cliente.
      </p>
    </div>

    <!-- Dise√±o Referencial -->
    <div class="bg-white border border-blue-200 rounded-2xl p-5 shadow-sm">
      <h4 class="text-xl font-semibold text-blue-700 mb-2">üîó Dise√±o referencial</h4>
      <p class="text-gray-600 mb-3">
        Los datos se guardan en <strong>colecciones separadas</strong> y se vinculan 
        mediante un <code>_id</code> o campo de referencia.
      </p>
      <ul class="list-disc list-inside text-sm text-gray-600 mb-3">
        <li>Ideal para datos <strong>compartidos o grandes</strong>.</li>
        <li>Evita duplicar informaci√≥n.</li>
        <li>M√°s flexible para actualizar datos independientes.</li>
      </ul>

      <pre class="bg-gray-900 text-blue-200 text-sm p-3 rounded-lg overflow-auto">
// Colecci√≥n clientes
db.clientes.insertOne({
  _id: 1,
  nombre: "Carlos"
});

// Colecci√≥n pedidos
db.pedidos.insertOne({
  _id: 101,
  fecha: "2025-11-08",
  total: 120000,
  id_cliente: 1
});

// Relaci√≥n con $lookup
db.pedidos.aggregate([
  {
    $lookup: {
      from: "clientes",
      localField: "id_cliente",
      foreignField: "_id",
      as: "cliente"
    }
  }
]);
      </pre>

      <p class="text-sm text-gray-500 mt-2 italic text-center">
        üîÅ Ejemplo: los pedidos y clientes se relacionan por <code>id_cliente</code>.
      </p>
    </div>
  </div>

  <div class="mt-6 bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-2xl border border-gray-200">
    <h4 class="font-semibold text-lg text-slate-800 mb-2">üìä Comparativo r√°pido</h4>
    <div class="overflow-x-auto">
      <table class="min-w-full border border-gray-200 text-sm">
        <thead class="bg-gray-100">
          <tr class="text-left text-gray-700">
            <th class="py-2 px-3 border">Caracter√≠stica</th>
            <th class="py-2 px-3 border text-green-700">Embebido</th>
            <th class="py-2 px-3 border text-blue-700">Referencial</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="py-2 px-3 border">Ubicaci√≥n</td>
            <td class="py-2 px-3 border">En el mismo documento</td>
            <td class="py-2 px-3 border">En colecciones separadas</td>
          </tr>
          <tr>
            <td class="py-2 px-3 border">Velocidad de lectura</td>
            <td class="py-2 px-3 border">Alta</td>
            <td class="py-2 px-3 border">Media</td>
          </tr>
          <tr>
            <td class="py-2 px-3 border">Actualizaci√≥n</td>
            <td class="py-2 px-3 border">M√°s compleja</td>
            <td class="py-2 px-3 border">M√°s flexible</td>
          </tr>
          <tr>
            <td class="py-2 px-3 border">Ideal para</td>
            <td class="py-2 px-3 border">Datos dependientes</td>
            <td class="py-2 px-3 border">Datos compartidos</td>
          </tr>
          <tr>
            <td class="py-2 px-3 border">Ejemplo t√≠pico</td>
            <td class="py-2 px-3 border">Cliente con direcci√≥n</td>
            <td class="py-2 px-3 border">Cliente con muchos pedidos</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="mt-4 text-gray-700 italic">
    üí° Consejo: usa dise√±o <strong>embebido</strong> para dependencias simples y 
    <strong>referencial</strong> cuando necesites relaciones flexibles o datos reutilizables.
  </p>
</section>

<!-- 4 -->
<section class="card">
<h3>üìô 4. Tipos de datos en MongoDB/BSON</h3>
<p class="text-gray-700 mb-4">Los principales tipos de datos de MongoDB se representan en formato BSON (Binary JSON).  
Nota: el tipo <code class="inline">Symbol</code> existe en versiones antiguas pero est√° <strong>deprecado</strong>.</p>
<div class="overflow-x-auto mb-4">
<table class="w-full border border-gray-200 rounded-xl text-left text-gray-700">
<thead class="bg-green-100">
<tr><th class="p-3">Tipo</th><th class="p-3">Descripci√≥n</th><th class="p-3">Ejemplo</th></tr>
</thead>
<tbody>
<tr class="border-t"><td class="p-3 font-medium">String</td><td class="p-3">Cadena de texto UTF-8</td><td>"Hola Mundo"</td></tr>
<tr class="border-t"><td class="p-3 font-medium">Number</td><td class="p-3">Enteros o decimales</td><td>42, 3.14</td></tr>
<tr class="border-t"><td class="p-3 font-medium">Boolean</td><td class="p-3">Verdadero o falso</td><td>true, false</td></tr>
<tr class="border-t"><td class="p-3 font-medium">Date</td><td class="p-3">Fechas y horas</td><td>ISODate("2025-10-28T00:00:00Z")</td></tr>
<tr class="border-t"><td class="p-3 font-medium">Array</td><td class="p-3">Lista de valores</td><td>[1,2,3], ["a","b","c"]</td></tr>
<tr class="border-t"><td class="p-3 font-medium">Object</td><td class="p-3">Documento embebido</td><td>{"nombre":"Diego","edad":30}</td></tr>
<tr class="border-t"><td class="p-3 font-medium">Null</td><td class="p-3">Valor nulo</td><td>null</td></tr>
<tr class="border-t"><td class="p-3 font-medium">ObjectId</td><td class="p-3">Identificador √∫nico</td><td>ObjectId("652e...")</td></tr>
</tbody>
</table>
</div>
</section>

<!-- 5 -->
<section class="card">
<h3>üìó 5. Ejemplo pr√°ctico: Autores y Libros</h3>
<p class="text-gray-700">Dise√±o embebido:</p>
<pre class="code">
{
  "_id": 1,
  "nombre": "Gabriel Garc√≠a M√°rquez",
  "libros": [
    { "titulo": "Cien a√±os de soledad", "anio": 1967 },
    { "titulo": "El amor en los tiempos del c√≥lera", "anio": 1985 }
  ]
}
</pre>
<p class="text-gray-700">Dise√±o referencial:</p>
<pre class="code">
db.autores.insertOne({ "_id":1, "nombre":"Gabriel Garc√≠a M√°rquez" });
db.libros.insertMany([
  { "titulo":"Cien a√±os de soledad","anio":1967, "autor_id":1 },
  { "titulo":"El amor en los tiempos del c√≥lera","anio":1985, "autor_id":1 }
]);
</pre>
</section>

<!-- 6 -->
<section class="card">
<h3>üß™ 6. Ejercicio pr√°ctico combinado</h3>
<p class="text-gray-700 mb-2">Crear un documento MongoDB para un estudiante:</p>
<ul class="list-disc pl-6 mb-3">
<li>Nombre (String)</li>
<li>Edad (Number)</li>
<li>¬øActivo? (Boolean)</li>
<li>Fecha de inscripci√≥n (Date)</li>
<li>Materias (Array)</li>
<li>Direcci√≥n (Object con calle y ciudad)</li>
</ul>
<p class="text-gray-700 mb-3 italic">üí° Sugerencia: inserta este documento en MongoDB Compass o Atlas y luego ejecuta <code class="inline">db.estudiantes.find().pretty()</code> para ver el resultado estructurado.</p>
<details>
<summary>Ver soluci√≥n</summary>
<div class="content">
<pre class="code">
{
  "nombre": "Ana P√©rez",
  "edad": 21,
  "activo": true,
  "fecha_inscripcion": ISODate("2025-10-28T00:00:00Z"),
  "materias": ["Matem√°ticas", "Historia", "Ingl√©s"],
  "direccion": {
    "calle": "Calle 123",
    "ciudad": "Medell√≠n"
  }
}
</pre>
</div>
</details>
</section>

<!-- Quiz -->
<section class="card">
<h3>üìù Quiz combinado (20 preguntas)</h3>
<div id="quiz"></div>
</section>

<footer class="mt-10 text-center text-sm text-gray-500">
  <p>üìò Gu√≠a de apoyo educativo ‚Äî Versi√≥n 2025. Desarrollada por Diego L√≥pez con apoyo de IA para fines formativos.</p>
</footer>

</main>

<script>
// Quiz de m√≥dulo 2+3
const quizData = [
  {question:"1. ¬øEquivalente de una tabla en MongoDB?", options:["Colecci√≥n","Campo","Documento"], answer:"Colecci√≥n"},
  {question:"2. Relaci√≥n r√°pida para lectura de datos relacionados:", options:["Embebido","Referencial"], answer:"Embebido"},
  {question:"3. ¬øQu√© es un documento?", options:["Una fila en MongoDB","Una tabla","Una base de datos"], answer:"Una fila en MongoDB"},
  {question:"4. JOIN en MongoDB se hace con:", options:["$lookup","$match","$group"], answer:"$lookup"},
  {question:"5. PRIMARY KEY en MongoDB es:", options:["_id","id","key"], answer:"_id"},
  {question:"6. Relaci√≥n 1 a muchos:", options:["Cliente ‚Üí Pedidos","Cliente ‚Üí Perfil","Pedidos ‚Üî Productos"], answer:"Cliente ‚Üí Pedidos"},
  {question:"7. SQL ‚Üí MongoDB flexible o r√≠gido?", options:["Flexible","R√≠gido"], answer:"Flexible"},
  {question:"8. Embebido es √∫til para:", options:["Lecturas r√°pidas","Datos compartidos grandes"], answer:"Lecturas r√°pidas"},
  {question:"9. Referencial se recomienda para:", options:["Datos grandes o compartidos","Documentos peque√±os"], answer:"Datos grandes o compartidos"},
  {question:"10. Un campo en MongoDB equivale a:", options:["Columna","Fila","Documento"], answer:"Columna"},
  {question:"11. ¬øQu√© tipo de dato usar√≠as para almacenar un texto?", options:["String","Number","Boolean","ObjectId"], answer:"String"},
  {question:"12. Funci√≥n de ObjectId:", options:["Almacenar n√∫meros","Identificador √∫nico de documento","Cadena de texto","Fecha"], answer:"Identificador √∫nico de documento"},
  {question:"13. C√≥mo se representa un valor nulo?", options:["0","null","''","undefined"], answer:"null"},
  {question:"14. Tipo para lista de materias?", options:["Array","Object","String","Boolean"], answer:"Array"},
  {question:"15. C√≥mo se almacena una fecha en MongoDB?", options:["Date","String","Number","Boolean"], answer:"Date"},
  {question:"16. Cu√°l no es un tipo BSON?", options:["String","Symbol","Binary","Function"], answer:"Function"},
  {question:"17. Tipo para verdadero o falso?", options:["Boolean","String","Number","Date"], answer:"Boolean"},
  {question:"18. Diferencia JSON vs BSON?", options:["JSON es binario, BSON es texto","JSON es texto, BSON es binario","Ambos son texto","Ambos son binarios"], answer:"JSON es texto, BSON es binario"},
  {question:"19. Tipo para documento embebido?", options:["Object","Array","String","Boolean"], answer:"Object"},
  {question:"20. Ejemplo de Array v√°lido?", options:["{1,2,3}","[1,2,3]","(1,2,3)","<1,2,3>"], answer:"[1,2,3]"}
];

const quizContainer = document.getElementById('quiz');
quizData.forEach((q, idx)=>{
  const div=document.createElement('div');
  div.className='mb-4 p-4 border rounded-lg bg-blue-50';
  div.innerHTML=`<p class="font-semibold">${q.question}</p>
    <div class="mt-2 space-y-2">
      ${q.options.map(o=>`<button class="btn btn-ghost w-full text-left option">${o}</button>`).join('')}
    </div>
    <p class="mt-2 small correct" style="display:none;color:green;">‚úÖ Correcto!</p>
    <p class="mt-2 small wrong" style="display:none;color:red;">‚ùå Incorrecto. La respuesta correcta es: <strong>${q.answer}</strong></p>
  `;
  quizContainer.appendChild(div);

  div.querySelectorAll('.option').forEach(btn=>{
    btn.addEventListener('click', e=>{
      if(e.target.textContent===q.answer){
        div.querySelector('.correct').style.display='block';
        div.querySelector('.wrong').style.display='none';
      }else{
        div.querySelector('.correct').style.display='none';
        div.querySelector('.wrong').style.display='block';
      }
    });
  });
});
</script>

</body>
</html>
